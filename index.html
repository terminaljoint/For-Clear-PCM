<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>For clear PCM</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="icon" href="https://upload.wikimedia.org/wikipedia/commons/3/3b/Math_icon.svg">
<link href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@400;700&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box;margin:0;padding:0}
body{
  font-family:"Comic Neue",system-ui;
  background:#0d1117;
  color:#e6edf3;
  min-height:100vh;
  display:flex;
  flex-direction:column;
}
header{
  padding:16px 24px;
  border-bottom:1px solid #30363d;
}
.brand{font-size:1.8rem;font-weight:700}
.subtitle{font-size:.9rem;color:#8b949e;margin-top:4px}

/* SUBJECT SWITCH */
.subject-bar{
  display:flex;
  gap:10px;
  padding:10px 24px;
  border-bottom:1px solid #30363d;
}
.subject-btn{
  padding:6px 12px;
  border:1px solid #30363d;
  border-radius:6px;
  font-size:.85rem;
  cursor:pointer;
}
.subject-btn.active{
  border-color:#2f81f7;
  color:#2f81f7;
}
.subject-btn:hover{background:#161b22}

main{
  max-width:900px;
  margin:0 auto;
  padding:24px;
  flex:1;
}

/* NAV */
.nav{
  display:flex;
  gap:12px;
  align-items:center;
  margin-bottom:16px;
  flex-wrap:wrap;
}
.back{
  cursor:pointer;
  color:#2f81f7;
  font-size:.85rem;
}
.breadcrumb{
  display:flex;
  gap:6px;
  flex-wrap:wrap;
}
.crumb{
  padding:4px 8px;
  border:1px solid #30363d;
  border-radius:5px;
  font-size:.8rem;
  cursor:pointer;
  color:#2f81f7;
}
.crumb:hover{background:#161b22}

.hidden{display:none}

/* LIST */
h2{font-size:1.25rem;margin-bottom:14px}
.item{
  padding:10px 12px;
  border:1px solid #30363d;
  border-radius:6px;
  margin-bottom:8px;
  cursor:pointer;
}
.item:hover{background:#161b22}

/* FOCUS */
.focus{max-width:720px;margin:0 auto}
.modes{
  display:flex;
  gap:16px;
  border-bottom:1px solid #30363d;
  margin:18px 0;
}
.modes button{
  background:none;border:none;
  font-weight:700;
  color:#8b949e;
  cursor:pointer;
  padding:6px 0;
}
.modes button.active{
  color:#2f81f7;
  border-bottom:2px solid #2f81f7;
}
.block{margin-top:18px}
.block h3{color:#2f81f7;margin-bottom:10px}
.block ul{list-style:none}
.block li{
  padding:6px 0;
  border-bottom:1px dashed #30363d;
}

/* FOOTER */
footer{
  border-top:1px solid #30363d;
  padding:14px 24px;
  font-size:.8rem;
  color:#8b949e;
  text-align:center;
}
</style>
</head>

<body>

<header>
  <div class="brand">For clear PCM</div>
  <div class="subtitle">official hierarchy · device-back safe</div>
</header>

<div class="subject-bar">
  <div class="subject-btn" onclick="switchSubject('Maths')">Maths</div>
  <div class="subject-btn" onclick="switchSubject('Physics')">Physics</div>
  <div class="subject-btn" onclick="switchSubject('Chemistry')">Chemistry</div>
</div>

<main>
  <div class="nav hidden" id="nav">
    <div class="back" onclick="appBack()">← Back</div>
    <div class="breadcrumb" id="breadcrumb"></div>
  </div>
  <div id="view"></div>
</main>

<footer>
  Built under <strong>Terminal Joint</strong> · Structured PCM learning
</footer>

<script>
/* ===== SYLLABUS ===== */
const syllabus = {
  Maths:{
    "Sets & Functions":{
      "Sets":["Types of Sets","Set Operations","Venn Diagrams"],
      "Functions":["Domain & Range","Types of Functions","Inverse Function"]
    }
  },
  Physics:{
    "Kinematics":{
      "Motion":["1D Motion","2D Motion"]
    }
  },
  Chemistry:{
    "Chemical Bonding":{
      "Bonding":["VSEPR Theory","Hybridisation","MO Theory"]
    }
  }
};

/* ===== STATE ===== */
let stack=[];
let mode="base";

const view=document.getElementById("view");
const nav=document.getElementById("nav");
const breadcrumb=document.getElementById("breadcrumb");
const subjectBtns=document.querySelectorAll(".subject-btn");

/* ===== HISTORY SYNC ===== */
function pushHistory(){
  history.pushState({stack:[...stack],mode}, "", "");
}

window.onpopstate = e => {
  if(e.state){
    stack = e.state.stack || [];
    mode = e.state.mode || "base";
    render(false);
  }
};

/* ===== SUBJECT SWITCH ===== */
function switchSubject(sub){
  stack=[sub];
  mode="base";
  updateSubjectBar(sub);
  pushHistory();
  render(false);
}

function updateSubjectBar(active){
  subjectBtns.forEach(b=>{
    b.classList.toggle("active",b.innerText===active);
  });
}

/* ===== NAV ===== */
function updateBreadcrumb(){
  breadcrumb.innerHTML="";
  stack.forEach((s,i)=>{
    const c=document.createElement("div");
    c.className="crumb";
    c.innerText=s;
    c.onclick=()=>jumpTo(i);
    breadcrumb.appendChild(c);
  });
}

function appBack(){
  if(stack.length>0){
    stack.pop();
    pushHistory();
    render(false);
  }
}

function jumpTo(i){
  stack=stack.slice(0,i+1);
  pushHistory();
  render(false);
}

/* ===== RENDER ===== */
function render(push=true){
  view.innerHTML="";
  nav.classList.toggle("hidden",stack.length===0);
  updateBreadcrumb();

  if(push) pushHistory();

  if(stack.length===0){
    renderList("Select Subject",Object.keys(syllabus),s=>switchSubject(s));
    return;
  }
  if(stack.length===1){
    renderList("Chapters",Object.keys(syllabus[stack[0]]),s=>{stack.push(s);render();});
    return;
  }
  if(stack.length===2){
    renderList("Topics",Object.keys(syllabus[stack[0]][stack[1]]),s=>{stack.push(s);render();});
    return;
  }
  if(stack.length===3){
    renderList("Concepts",syllabus[stack[0]][stack[1]][stack[2]],s=>{stack.push(s);render();});
    return;
  }
  renderConcept();
}

function renderList(title,items,cb){
  view.innerHTML=`<h2>${title}</h2>`;
  items.forEach(i=>{
    const d=document.createElement("div");
    d.className="item";
    d.innerText=i;
    d.onclick=()=>cb(i);
    view.appendChild(d);
  });
}

function renderConcept(){
  view.innerHTML=`
    <div class="focus">
      <h2>${stack[3]}</h2>
      <div class="modes">
        <button class="${mode==='base'?'active':''}" onclick="setMode('base')">Base</button>
        <button class="${mode==='jee'?'active':''}" onclick="setMode('jee')">JEE</button>
        <button class="${mode==='mistake'?'active':''}" onclick="setMode('mistake')">Mistake</button>
      </div>
      ${content()}
    </div>`;
}

function setMode(m){
  mode=m;
  pushHistory();
  render(false);
}

function content(){
  if(mode==="base") return `
    <div class="block"><h3>Base Level</h3><ul>
      <li>Definition</li>
      <li>Formula</li>
      <li>Terms</li>
      <li>WHEN to use</li>
      <li>WHY this formula</li>
    </ul></div>`;
  if(mode==="jee") return `
    <div class="block"><h3>JEE Main</h3><ul>
      <li>WHERE it appears</li>
      <li>HOW to apply</li>
      <li>WHAT to use / not use</li>
      <li>Heavy JEE example</li>
    </ul></div>`;
  return `
    <div class="block"><h3>Mistake Bank</h3><ul>
      <li>Wrong assumptions</li>
      <li>Wrong steps</li>
      <li>MCQ traps</li>
    </ul></div>`;
}

/* INIT */
history.replaceState({stack:[],mode},"","");
render(false);
</script>

</body>
  </html>
