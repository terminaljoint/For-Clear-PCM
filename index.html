<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>For Clear PCM â€“ Ultra Deep Structured JEE Learning</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@400;700&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:"Comic Neue",system-ui;background:#0d1117;color:#e6edf3;min-height:100vh;display:flex;flex-direction:column}
header{padding:22px 24px;border-bottom:1px solid #30363d}
.brand{font-size:2rem;font-weight:700}
.subtitle{color:#9aa4af;margin-top:6px}
.subject-bar{display:flex;gap:12px;padding:14px 24px;border-bottom:1px solid #30363d}
.subject-btn{padding:8px 16px;border:1px solid #30363d;border-radius:10px;cursor:pointer;font-weight:700}
.subject-btn.active{border-color:#2f81f7;color:#2f81f7}
main{max-width:1100px;margin:0 auto;padding:32px 24px;flex:1}
.item{padding:14px 16px;border:1px solid #30363d;border-radius:10px;margin-bottom:12px;cursor:pointer}
.item:hover{border-color:#2f81f7}
.back{margin-bottom:14px;color:#2f81f7;cursor:pointer}
footer{border-top:1px solid #30363d;padding:16px 24px;font-size:.85rem;color:#9aa4af;text-align:center}
textarea,input,select{width:100%;background:#0d1117;color:#e6edf3;border:1px solid #30363d;border-radius:8px;padding:10px}
</style>
<script defer>
/* ===== OWNER LOCK ===== */
const OWNER_PASSWORD="FailMarks";
let OWNER_UNLOCKED=false;
function checkLock(){OWNER_UNLOCKED=localStorage.getItem("OWNER_UNLOCK")==="YES";}
function unlockOwner(){const p=prompt("Owner password");if(p===OWNER_PASSWORD){localStorage.setItem("OWNER_UNLOCK","YES");OWNER_UNLOCKED=true;render();}else if(p!==null){alert("Wrong password");}}
function lockOwner(){localStorage.removeItem("OWNER_UNLOCK");OWNER_UNLOCKED=false;render();}

/* ===== STATUS ===== */
const STATUS=["empty","draft","done","revised"];
const getStatus=p=>localStorage.getItem("STATUS_"+p.join("/"))||"empty";
const setStatus=(p,s)=>localStorage.setItem("STATUS_"+p.join("/"),s);

/* ===== CONTENT STORAGE ===== */
const getContent=p=>localStorage.getItem("CONTENT_"+p.join("/"))||null;
const setContent=(p,v)=>localStorage.setItem("CONTENT_"+p.join("/"),v);

/* ===== SYLLABUS STRUCTURE ===== */
const syllabus={
Maths:{Sets_and_Relations:{Sets:{Definition:{},Types:{},Operations:{},Laws:{}}}},
Physics:{Kinematics:{OneD:{},TwoD:{}}},
Chemistry:{Physical:{MoleConcept:{}},Organic:{},Inorganic:{}}
};

let path=[];let view;
const isLeaf=n=>typeof n!=="object";
const getNode=()=>path.reduce((o,k)=>o[k],syllabus);

function setActive(){document.querySelectorAll(".subject-btn").forEach(b=>b.classList.toggle("active",path[0]===b.dataset.sub));}

function render(){
  checkLock();
  view.innerHTML="";
  setActive();

  if(path.length){const b=document.createElement("div");b.className="back";b.innerText="â† Back";b.onclick=()=>{path.pop();render();};view.appendChild(b);}  

  if(!path.length){view.innerHTML+="<h2>Select subject</h2>";return;}

  const node=getNode();

  if(isLeaf(node)){
    const status=getStatus(path);
    const stored=getContent(path)??"";
    view.innerHTML+=`<h2>${path[path.length-1]}</h2><div>Status: <b>${status}</b></div>`;

    if(OWNER_UNLOCKED){
      const sel=document.createElement("select");
      STATUS.forEach(s=>{const o=document.createElement("option");o.value=o.text=s;if(s===status)o.selected=true;sel.appendChild(o);});
      sel.onchange=()=>setStatus(path,sel.value);
      view.appendChild(sel);

      const ta=document.createElement("textarea");
      ta.value=stored;
      ta.oninput=()=>setContent(path,ta.value);
      view.appendChild(ta);

      const lock=document.createElement("div");lock.className="back";lock.innerText="ðŸ”’ Lock editing";lock.onclick=lockOwner;view.appendChild(lock);
    }else{
      view.innerHTML+=stored?`<pre>${stored}</pre>`:`<div style='color:#9aa4af'>No content yet</div>`;
    }
    return;
  }

  Object.keys(node).forEach(k=>{const d=document.createElement("div");d.className="item";d.innerText=k;d.onclick=()=>{path.push(k);render();};view.appendChild(d);});
}

window.addEventListener("DOMContentLoaded",()=>{
  view=document.getElementById("view");
  document.querySelectorAll(".subject-btn").forEach(b=>b.onclick=()=>{path=[b.dataset.sub];render();});
  const footer=document.getElementById("footerTrigger");let last=0;footer.onclick=()=>{const n=Date.now();if(n-last<350)unlockOwner();last=n;};
  render();
});
</script>
</head>
<body>
<header><h1 class="brand">For Clear PCM</h1><p class="subtitle">Ultraâ€‘Deep JEE Knowledge Tree</p></header>
<div class="subject-bar"><div class="subject-btn" data-sub="Maths">Maths</div><div class="subject-btn" data-sub="Physics">Physics</div><div class="subject-btn" data-sub="Chemistry">Chemistry</div></div>
<main><div id="view"></div></main>
<footer id="footerTrigger">Â©2026 Terminal Joint Â· For Clear PCM</footer>
</body>
</html>
